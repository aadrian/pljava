<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2020-10-04 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>PostgreSQL PL/Java &#x2013; PL/Java configuration variable reference</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20201004" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="https://tada.github.io/pljava/" id="bannerLeft" title="PL/Java logo combining the PostgreSQL elephant and a Java bean">
                                                <img src="../images/pljava_logo.jpg" alt="PL/Java logo combining the PostgreSQL elephant and a Java bean" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2020-10-04</span>
                  &nbsp;| <span id="projectVersion">Version: 1.5.6</span>
                      </div>
            <div class="xright">                    <a href="https://github.com/tada/pljava/wiki/" class="externalLink" title="Wiki">Wiki</a>
            |
                        <a href="https://github.com/tada/pljava/issues" class="externalLink" title="Issues">Issues</a>
            |
                        <a href="https://www.postgresql.org/list/pljava-dev/" class="externalLink" title="Mailing list">Mailing list</a>
            |
                        <a href="https://github.com/tada/pljava/tree/master/" class="externalLink" title="Code">Code</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Usage</h5>
                  <ul>
                  <li class="none">
                          <a href="../build/build.html" title="Building PL/Java">Building PL/Java</a>
            </li>
                  <li class="none">
                          <a href="../install/install.html" title="Installing into PostgreSQL">Installing into PostgreSQL</a>
            </li>
                  <li class="none">
                          <a href="../install/upgrade.html" title="Upgrading">Upgrading</a>
            </li>
                  <li class="none">
                          <a href="../build/package.html" title="Packaging PL/Java">Packaging PL/Java</a>
            </li>
                  <li class="none">
                          <a href="../use/use.html" title="User guide">User guide</a>
            </li>
                  <li class="none">
                          <a href="../develop/develop.html" title="Developer notes">Developer notes</a>
            </li>
          </ul>
                       <h5>Release Information</h5>
                  <ul>
                  <li class="none">
                          <a href="../releasenotes.html" title="Release notes">Release notes</a>
            </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="../pljava-api/index.html" title="PL/Java API">PL/Java API</a>
            </li>
                  <li class="none">
                          <a href="../pljava/index.html" title="PL/Java backend Java code">PL/Java backend Java code</a>
            </li>
                  <li class="none">
                          <a href="../pljava-so/index.html" title="PL/Java backend native code">PL/Java backend native code</a>
            </li>
                  <li class="none">
                          <a href="../pljava-deploy/index.html" title="PL/Java Deploy">PL/Java Deploy</a>
            </li>
                  <li class="none">
                          <a href="../pljava-ant/index.html" title="PL/Java Ant tasks">PL/Java Ant tasks</a>
            </li>
                  <li class="none">
                          <a href="../pljava-examples/index.html" title="PL/Java examples">PL/Java examples</a>
            </li>
                  <li class="none">
                          <a href="../pljava-packaging/index.html" title="PL/Java packaging">PL/Java packaging</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>PL/Java configuration variable reference</h1>
<p>These PostgreSQL configuration variables can influence PL/Java&#x2019;s operation:</p>

<dl>
<dt><tt>dynamic_library_path</tt></dt>
<dd>Although strictly not a PL/Java variable, <tt>dynamic_library_path</tt> influences where the PL/Java native code object (<tt>.so</tt>, <tt>.dll</tt>, <tt>.bundle</tt>, etc.) can be found, if the full path is not given to the <tt>LOAD</tt> command.</dd>
<dt><tt>server_encoding</tt></dt>
<dd>Another non-PL/Java variable, this affects all text/character strings exchanged between PostgreSQL and Java. <tt>UTF8</tt> as the database and server encoding is <i>strongly</i> recommended. If a different encoding is used, it should be any of the available <i>fully defined</i> character encodings. In particular, the PostgreSQL pseudo-encoding <tt>SQL_ASCII</tt> (which means &#x201c;characters within ASCII are ASCII, others are no-one-knows-what&#x201d;) will <i>not</i> work well with PL/Java, raising exceptions whenever strings contain non-ASCII characters. (PL/Java can still be used in such a database, but the application code needs to know what it&#x2019;s doing and use the right conversion functions where needed.)</dd>
<dt><tt>pljava.classpath</tt></dt>
<dd>The class path to be passed to the Java application class loader. There must be at least one (and usually only one) entry, the PL/Java jar file itself. To determine the proper setting, see <a href="../install/locate.html">finding the files produced by a PL/Java build</a>.</dd>
<dt><tt>pljava.debug</tt></dt>
<dd>A boolean variable that, if set <tt>on</tt>, stops the process on first entry to PL/Java before the Java virtual machine is started. The process cannot proceed until a debugger is attached and used to set the static <tt>Backend.c</tt> variable <tt>pljavaDebug</tt> to zero. This may be useful for debugging PL/Java problems only seen in the context of some larger application that can&#x2019;t be stepped through.</dd>
<dt><tt>pljava.enable</tt></dt>
<dd>Setting this variable <tt>off</tt> prevents PL/Java startup from completing, until the variable is later set <tt>on</tt>. It can be useful when <a href="../install/prepg92.html">installing PL/Java on PostgreSQL versions before 9.2</a>.</dd>
<dt><tt>pljava.implementors</tt></dt>
<dd>A list of &#x201c;implementor names&#x201d; that PL/Java will recognize when processing <a class="externalLink" href="https://github.com/tada/pljava/wiki/Sql-deployment-descriptor">deployment descriptors</a> inside a jar file being installed or removed. Deployment descriptors can contain commands with no implementor name, which will be executed always, or with an implementor name, executed only on a system recognizing that name. By default, this list contains only the entry <tt>postgresql</tt>. A deployment descriptor that contains commands with other implementor names can achieve a rudimentary kind of conditional execution if earlier commands adjust this list of names. <i>Commas separate elements of this list. Elements that are not regular identifiers need to be surrounded by double-quotes; prior to PostgreSQL 11, that syntax can be used directly in a <tt>SET</tt> command, while in 11 and after, such a value needs to be a (single-quoted) string explicitly containing the double quotes.</i></dd>
<dt><tt>pljava.java_thread_pg_entry</tt></dt>
<dd>
<p>A choice of <tt>allow</tt>, <tt>error</tt>, or <tt>block</tt> controlling PL/Java&#x2019;s thread management. Java makes heavy use of threading, while PostgreSQL may not be accessed by multiple threads concurrently. PL/Java&#x2019;s historical behavior is <tt>allow</tt>, which serializes access by Java threads into PostgreSQL, allowing a different Java thread in only when the current one calls or returns into Java. PL/Java formerly made some use of Java object finalizers, which required this approach, as finalizers run in their own thread.</p>
<p>PL/Java itself no longer requires the ability for any thread to access PostgreSQL other than the original main thread. User code developed for PL/Java, however, may still rely on that ability. To test whether it does, the <tt>error</tt> setting can be used here, and any attempt by a Java thread other than the main one to enter PostgreSQL will incur an exception (and stack trace, written to the server&#x2019;s standard error channel). When confident that there is no code that will need to enter PostgreSQL except on the main thread, the <tt>block</tt> setting can be used. That will eliminate PL/Java&#x2019;s frequent lock acquisitions and releases when the main thread crosses between PostgreSQL and Java, and will simply indefinitely block any other Java thread that attempts to enter PostgreSQL. This is an efficient setting, but can lead to blocked threads or a deadlocked backend if used with code that does attempt to access PG from more than one thread. (A JMX client, like JConsole, can identify the blocked threads, should that occur.)</p></dd>
<dt><tt>pljava.libjvm_location</tt></dt>
<dd>Used by PL/Java to load the Java runtime. The full path to a <tt>libjvm</tt> shared object (filename typically ending with <tt>.so</tt>, <tt>.dll</tt>, or <tt>.dylib</tt>). To determine the proper setting, see <a href="../install/locatejvm.html">finding the <tt>libjvm</tt> library</a>.</dd>
<dt><tt>pljava.release_lingering_savepoints</tt></dt>
<dd>
<p>How the return from a PL/Java function will treat any savepoints created within it that have not been explicitly either released (the savepoint analog of &#x201c;committed&#x201d;) or rolled back and released. If <tt>off</tt> (the default), they will be rolled back. If <tt>on</tt>, they will be released/committed. If possible, rather than setting this variable <tt>on</tt>, it would be safer to fix the function to release its own savepoints when appropriate.</p>
<p>A savepoint continues to exist after being used as a rollback target. This is JDBC-specified behavior, but was not PL/Java&#x2019;s behavior before release 1.5.3, so code may exist that did not explicitly release or roll back a savepoint after rolling back to it once. To avoid a behavior change for such code, PL/Java will always release a savepoint that is still live at function return, regardless of this setting, if the savepoint has already been rolled back.</p></dd>
<dt><tt>pljava.statement_cache_size</tt></dt>
<dd>The number of most-recently-prepared statements PL/Java will keep open.</dd>
<dt><tt>pljava.vmoptions</tt></dt>
<dd>
<p>Any options to be passed to the Java runtime, in the same form as the documented options for the <tt>java</tt> command (<a class="externalLink" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">windows</a>, <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html">Unix family</a>). The string is split on whitespace unless found between single or double quotes. A backslash treats the following character literally, but the backslash itself remains in the string, so not all values can be expressed with these rules. If the server encoding is not <tt>UTF8</tt>, only ASCII characters should be used in <tt>pljava.vmoptions</tt>. The exact quoting and encoding rules for this variable may be adjusted in a future PL/Java version.</p>
<p>Some important settings can be made here, and are described on the <a href="../install/vmoptions.html">VM options page</a>.</p></dd>
</dl>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2003&#x2013;2020
                        <a href="http://tada.se/eng/">Tada AB</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
